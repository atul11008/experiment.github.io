<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width">
        <title>Peer-to-Peer Cue System --- Sender</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js">
        </script>
        <script type="text/javascript" src="paint.js"></script>
        <script type="text/javascript" src="init.js"></script>    
          </head>
<<<<<<< HEAD
          <body>
            <div id="container" style="padding:5px 0px 0px 0px;">
        <div id="colorToolbar" style="border: 1px solid black; float: left;"> 
        <div id="red" style="background:red; width:50px; height:50px; float:left;"></div>
        <div style="clear: both;"></div> 
        <div id="pink" style="background:pink; width:50px; height:50px; float:left;"></div>
        <div style="clear: both;"></div> 
        <div id="fuchsia" style="background:fuchsia; width:50px; height:50px; float:left;"></div>
        <div style="clear: both;"></div> 
        <div id="orange" style="background:orange; width:50px; height:50px; float:left;"></div>
        <div style="clear: both;"></div> 
        <div id="yellow" style="background:yellow; width:50px; height:50px; float:left;"></div>
        <div style="clear: both;"></div> 
        <div id="lime" style="background:lime; width:50px; height:50px; float:left;"></div>
        <div style="clear: both;"></div> 
        <div id="green" style="background:green; width:50px; height:50px; float:left;"></div>
        <div style="clear: both;"></div> 
        <div id="blue" style="background:blue; width:50px; height:50px; float:left;"></div>
        <div style="clear: both;"></div> 
        <div id="purple" style="background:purple; width:50px; height:50px; float:left;"></div>
        <div style="clear: both;"></div> 
        <div id="black" style="background:black; width:50px; height:50px; 
        float:left; border: 1px dashed white;"></div>
        <div style="clear: both;"></div> 
        <div id="white" style="background:white; width:50px; height:50px; float:left;"></div>
        <div style="clear: both;"></div> 
                    <hr/> 
        <div id="fill" style="width:50px; height:50px; float:left;">
        <img src="fill.png" width="50" height="50" /></div>
        <div style="clear: both;"></div> 
        <div id="cat" style="width:50px; height:50px; float:left;">
        <img id="catImg" src="cat.png" width="50" height="50" /></div>
        <div style="clear: both;"></div> 
        <div id="dog" style="width:50px; height:50px; float:left;">
        <img id="dogImg" src="dog.png" width="50" height="50" /></div>
        <div style="clear: both;"></div> 
        <div id="dragonfly" style="width:50px; height:50px; float:left;">
        <img id="dragonFlyImg" src="fly.png" width="50" height="50" /></div>
        <div style="clear: both;"></div> 
        <div id="ladybug" style="width:50px; height:50px; float:left;">
        <img id="ladyBugImg" src="bug.png" width="50" height="50" /></div>
        <div style="clear: both;"></div> 
        <div id="heart" style="width:50px; height:50px; float:left;">
        <img id="heartImg" src="heart.png" width="50" height="50" /></div>
        <div style="clear: both;"></div> 
        <div id="save" style="width:50px; height:50px; float:left;">Save</div>
        <div style="clear: both;"></div> 
                </div> 
                <div id="canvasDiv" style="float: left;">
                  <canvas id="imageView">
                    <p>Unfortunately, your browser is currently unsupported by our web 
                    application.  We are sorry for the inconvenience. Please use one of the 
                    supported browsers listed below, or draw the image you want using an 
                    offline tool.</p>
                    <p>Supported browsers: <a href="http://www.opera.com">Opera</a>, <a 
                      href="http://www.mozilla.com">Firefox</a>, <a 
                      href="http://www.apple.com/safari">Safari</a>, and <a 
                      href="http://www.konqueror.org">Konqueror</a>.</p>
                  </canvas>        
                </div>
        <div id="stats" style="font-size:8pt; padding-left: 50px; float: left;">0 0</div>        
            </div>  
        <script>
            if (window.addEventListener) {
   window.addEventListener('load', function() { init(); });
}
var started = false;
var canvas, context;
var stampId = '';
var lastColor = 'black';
var lastStampId = '';

function init() {
    canvas = $('#imageView').get(0);
    context = canvas.getContext('2d');

    // Auto-adjust canvas size to fit window.
    canvas.width  = window.innerWidth - 75;
    canvas.height = window.innerHeight - 75;

    canvas.addEventListener('mousemove', onMouseMove, false);
    canvas.addEventListener('click', onClick, false);

    // Add events for toolbar buttons.
    $('#red').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#pink').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#fuchsia').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#orange').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#yellow').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#lime').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#green').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#blue').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#purple').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#black').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#white').get(0).addEventListener('click', function(e) { 
     onColorClick(e.target.id); }, false);
    $('#cat').get(0).addEventListener('click', function(e) { 
     onStamp(e.target.id); }, false);
    $('#dragonfly').get(0).addEventListener('click', function(e) { 
     onStamp(e.target.id); }, false);
    $('#ladybug').get(0).addEventListener('click', function(e) { 
     onStamp(e.target.id); }, false);
    $('#heart').get(0).addEventListener('click', function(e) { 
     onStamp(e.target.id); }, false);
    $('#dog').get(0).addEventListener('click', function(e) { 
     onStamp(e.target.id); }, false);
    $('#fill').get(0).addEventListener('click', function(e) { onFill(); }, false);
    $('#save').get(0).addEventListener('click', function(e) { onSave(); }, false);
}
function onMouseMove(ev) {
    var x, y;

    // Get the mouse position.
    if (ev.layerX >= 0) {
        // Firefox
        x = ev.layerX - 50;
        y = ev.layerY - 5;
    }
    else if (ev.offsetX >= 0) {
        // Opera
        x = ev.offsetX - 50;
        y = ev.offsetY - 5;
    }

    if (!started) {
        started = true;

        context.beginPath();
        context.moveTo(x, y);        
    }
    else {
        context.lineTo(x, y);
        context.stroke();
    }

    $('#stats').text(x + ', ' + y);
}
function onClick(e) {
    if (stampId.length > 0) {
        context.drawImage($(stampId).get(0), e.pageX - 90, e.pageY - 60, 80, 80);
    }
}
        </script>
=======
    <style>
    *{	
    border:0;
    padding:0;
    margin:0;
}

div{
	position:fixed;
	width:100%;
}

h1{
	color:blue;
    font-family:verdana;
    font-size:300%;		
}

canvas{
	
	position: absolute;	
    top: 100px;
    left:300px;
    border: 10px solid black;
	display:block;
	background-color:black;
}

#btnMve{
    position:absolute;
    top: 150px;
    left: 195px;
	height:100px;
	width:100px;
	
}	

#btnClear {
    position:absolute;
    top: 300px;
    left: 195px;
	height:100px;
	width:100px;
}

#btnMove{
    position:absolute;
    top: 450px;
    left: 195px;
	height:100px;
	width:100px;
}
 
a.tooltipMove span {
    z-index:10;display:none; padding:14px 20px;
    margin-top:250px; margin-left:250px;
    width:200px; line-height:16px;
}

a.tooltipMove:hover span{
    display:inline; position:absolute; color:#111;
    border:1px solid #DCA; background:#fffAF0;}
.callout {z-index:20;position:absolute;top:250px;border:0;left:270px;}
    
a.tooltipClear span {
    z-index:10;display:none; padding:14px 20px;
    margin-top:400px; margin-left:250px;
    width:200px; line-height:16px;
}

a.tooltipClear:hover span{
    display:inline; position:absolute; color:#111;
    border:1px solid #DCA; background:#fffAF0;}
.callout {z-index:20;position:absolute;top:400px;border:0;left:270px;}
    
a.tooltipRandom span {
    z-index:10;display:none; padding:14px 20px;
    margin-top:550px; margin-left:250px;
    width:250px; line-height:16px;
}

a.tooltipRandom:hover span{
    display:inline; position:absolute; color:#111;
    border:1px solid #DCA; background:#fffAF0;}
.callout {z-index:20;position:absolute;top:550px;border:0;left:270px;}	

a.tooltip,.tooltip1,.tooltip3 span
{
    border-radius:4px;
    box-shadow: 5px 5px 8px #CCC;
}

::selection { background: transparent; }
::-moz-selection { background: transparent; }
    </style>
          <body>
          <div align="center" style="border:2px solid black"><h1>Circle</h1></div>
	<canvas id="canvas" width="600" height="600"></canvas>
	
	<a class="tooltipMove" href="#" ><img id="btnMve" src="https://github.com/pallavisingh1511/Simple-Paint-App/blob/master/moveButton.jpg?raw=true" onclick="togglebtn()" name="Move Shape" alt="Move"><span id="spid" class="classic">Click here to move the circles</span></a>
	<a class="tooltipClear" href="#" ><img id="btnClear" src="https://github.com/pallavisingh1511/Simple-Paint-App/blob/mastereraseButton.jpg?raw=true" onclick="drawScreen()" alt="Erase"><span class="classic">Click here to clear the canvas</span></a>
	<a class="tooltipRandom" href="#" ><img id="btnMove" src="https://github.com/pallavisingh1511/Simple-Paint-App/blob/master/moveRandom.jpg?raw=true" onclick="moveRandomly()" name="Move Random" alt="Move Random"><span class="classic">Click here to move the circles randomly.
										<br>Click again to stop.</span></a>
              <script>
              //####################################################################################################################
//		Paint Application for Circle
//		Submitted by : Pallavi Singh
//####################################################################################################################
//Following tasks has been carried in this application using HTML5 Canvas Element

//1.	It lets the user draw circles on the canvas by dragging mouse.
//2.	IT automatically fills a different color to every different circle.
//3.	A button has been added that clears the canvas.
//4.	Another feature added where user can drag circles using mouse.
//5.	On double click of a circle deletes it.

//	It has been tested on the following browsers:
//			Google Chrome
//			Mozilla Firefox
//			IE
//			Safari

//	Additionally, the size of the canvas has not been kept fixed, and it varies with the resizing of the browser window.
//	
//	1. Draw : Drag mouse anywhere on the canvas to draw circles. (Click on Draw/ Move circle button to switch between the modes)
//	2. Move	Manually : Click and drag the circle you want to move. (Click on Draw/ Move circle button to switch between the modes)
//	3. Delete : Double click on the circle you want to delete.
//	4. Clear : Clicking on the clear button deletes all the drawn circles and clears the canvas.
//	5. Move Randomly : On click of the last button, the drawn circles start moving randomly.
//						It is a toggle button. Clicking it again will stop the movement.
//
//Global variable declaration
								
	var bgColor;
	var canvas;
	var canvasImage;	
	var circleCount;
	var circles;
	var color;
	var context;
	var draggingDraw;
	var draggingMove;
	var dragX;
	var dragY;
	var dragIndexDelete;
	var dragIndexMove;
	var dragStartLocation;
	var mouseX;
	var mouseY;
	var radius;
	var targetX;
	var targetY;
	var tempX;
	var tempY;
	var dx;
	var dy;
	var flagRandom= false;

window.addEventListener('load', init, false);

//resizing of canvas, based on the window size	(called on: load, resize of window)
window.onload = window.onresize = function() 
	{
		var canvas = document.getElementById('canvas');
		canvas.width = window.innerWidth * 0.6;
		canvas.height = window.innerHeight * 0.8;
		drawCircles();
	}	

//initialize global variables	(called on: load of window)	
function init() 
	{
		canvas = document.getElementById("canvas");
		context = canvas.getContext('2d');
		context.lineWidth = 4;
		context.lineCap = 'round';
	
		circleCount=0;	
		draggingDraw = false;
		bgColor = "#000000";
		circles = [];
		
		//event listeners to draw circles
		canvas.addEventListener('mousedown', dragStart, false);
		canvas.addEventListener('mousemove', drag, false);
		canvas.addEventListener('mouseup', dragStop, false);
		
		//event listener to delete circle
		canvas.addEventListener('dblclick', deleteCircle,false);
	}	


//####################################################################################################################
//		Drawing of Circles with random colors	
//####################################################################################################################
	
function dragStart(event) {
    draggingDraw = true;
    dragStartLocation = getCanvasCoordinates(event);
	color = "rgb(" + Math.floor(Math.random()*200) + "," + Math.floor(Math.random()*200) + "," + Math.floor(Math.random()*200) +")";
    getImage();
}

function drag(event) {
    var position;
    if (draggingDraw === true) {
        putImage();
        position = getCanvasCoordinates(event);
        drawCircle(position);
		context.fillStyle = color;
		context.fill();
    }
}
function dragStop(event) {
    draggingDraw = false;
    putImage();
    var position = getCanvasCoordinates(event);
    drawCircle(position);		
	context.fillStyle = color;
	context.fill();	
	circleCount=circleCount+1;
	tempCircle = {x:tempX, y:tempY, rad:radius, color:color};
	
	circles.push(tempCircle);
	
}
	
function getCanvasCoordinates(event) {

    var x = event.clientX - canvas.getBoundingClientRect().left,
        y = event.clientY - canvas.getBoundingClientRect().top;

    return {x: x, y: y};
}

function getImage() {
    canvasImage = context.getImageData(0, 0, canvas.width, canvas.height);
}

function putImage() {
    context.putImageData(canvasImage, 0, 0);
}

function drawCircle(position) {
	
		tempX=dragStartLocation.x;
		tempY=dragStartLocation.y;
		
		radius = Math.sqrt(Math.pow((tempX - position.x), 2) + Math.pow((tempY - position.y), 2));
		context.beginPath();
		context.arc(tempX, tempY, radius, 0, 2 * Math.PI, false);
		context.closePath();
}

//####################################################################################################################
//		On click of Erase Button
//####################################################################################################################

function drawScreen() {
		circleCount=0;
		circles = [];
		context.fillStyle = bgColor;
		context.fillRect(0,0,canvas.width,canvas.height);
	}	

//####################################################################################################################
//		On click of Draw / Move Button
//####################################################################################################################
	
function togglebtn(){

		if(document.getElementById("btnMve").name == "Draw Shape")
			{ 	
		
				canvas.removeEventListener("mousedown", mouseDown, false);
				document.getElementById("btnMve").src = "moveButton.jpg";
				document.getElementById("btnMve").name = "Move Shape";		
				document.getElementById("spid").innerHTML="Click here to move the circles";
		
				canvas.addEventListener('mousedown', dragStart, false);
				canvas.addEventListener('mousemove', drag, false);
				canvas.addEventListener('mouseup', dragStop, false);				
			}
	  else if(document.getElementById("btnMve").name == "Move Shape")
	  {         
		
				canvas.removeEventListener("mousedown", dragStart, false);
				canvas.removeEventListener("mousemove", drag, false);
				canvas.removeEventListener("mouseup", dragStop, false);
				
				document.getElementById("btnMve").src = "drawButton.jpg";
				document.getElementById("btnMve").name = "Draw Shape";
				document.getElementById("spid").innerHTML="Click here to draw the circles";
				
				canvas.addEventListener('mousedown', mouseDown, false);
	   }
 }
	
//####################################################################################################################
//		To Move/ Delete the Circles 
//####################################################################################################################

	function drawCircles() {
		var i;
		var x;
		var y;
		var rad;
		var color;
		
		context.fillStyle = bgColor;
		context.fillRect(0,0,canvas.width,canvas.height);		
		
		for (i=0; i < circleCount; i++) {
			rad = circles[i].rad;
			x = circles[i].x;
			y = circles[i].y;
			color=circles[i].color;
			context.beginPath();
			context.arc(x, y, rad, 0, 2*Math.PI, false);
			context.closePath();
			context.fillStyle = color;
			context.fill();
		}		
	}	
	//To check whether the circle was clicked
	function isCircleClicked(shape,mx,my) {		
		var dx;
		var dy;
		dx = mx - shape.x;
		dy = my - shape.y;
		return (dx*dx + dy*dy < shape.rad*shape.rad);
	}

//####################################################################################################################
//		To Delete the Circles	(on double-click)
//####################################################################################################################

function deleteCircle(event) 
{
		var i;
		var bRect = canvas.getBoundingClientRect();
//		var highestIndex=-1;
		dragIndexDelete=-1;
		
		mouseX = (event.clientX - bRect.left)*(canvas.width/bRect.width);
		mouseY = (event.clientY - bRect.top)*(canvas.height/bRect.height);
		//To find that which circle has been clicked
		for (i=0; i < circleCount; i++) {
			if	(isCircleClicked(circles[i], mouseX, mouseY)) {
				dragIndexDelete = i;		
			}
		}
		//Remove the circle from the array
		if ( dragIndexDelete> -1 ){
			circles.splice(dragIndexDelete,1)[0];
			circleCount=circleCount-1;
		}
		
		if (event.preventDefault) {
			event.preventDefault();
		} 
		else if (event.returnValue) {
			event.returnValue = false;
		} 
		drawCircles();				
		return false;
}

//####################################################################################################################
//		To Move the Circles Manually
//####################################################################################################################
	
function mouseDown(event) 
{
		var i;
		var highestIndex = -1;		
		var bRect = canvas.getBoundingClientRect();
	
		mouseX = (event.clientX - bRect.left)*(canvas.width/bRect.width);
		mouseY = (event.clientY - bRect.top)*(canvas.height/bRect.height);
		
		//To find that which circle has been clicked
		for (i=0; i < circleCount; i++) {
			if	(isCircleClicked(circles[i], mouseX, mouseY)) {
				draggingMove = true;
				if (i > highestIndex) {
					dragX = mouseX - circles[i].x;
					dragY = mouseY - circles[i].y;
					highestIndex = i;
					dragIndexMove = i;
				}				
			}
		}
		if (draggingMove) {
			window.addEventListener("mousemove", mouseMove, false);
			//Remove the circle and then push it to the top of the array
			circles.push(circles.splice(dragIndexMove,1)[0]);
			
		}
		canvas.removeEventListener("mousedown", mouseDown, false);
		window.addEventListener("mouseup", mouseUp, false);
		
		if (event.preventDefault) {
				event.preventDefault();
			} 
		else if (event.returnValue) {
				event.returnValue = false;
			} 
		return false;
}
	
	function mouseUp(event) {

		canvas.addEventListener("mousedown", mouseDown, false);
		window.removeEventListener("mouseup", mouseUp, false);
		if (draggingMove) {
			draggingMove = false;
			window.removeEventListener("mousemove", mouseMove, false);
		}
	}

	function mouseMove(event) {
		
		var posX;
		var posY;
		var shapeRad = circles[circleCount-1].rad;
		var minX = shapeRad;
		var maxX = canvas.width - shapeRad;
		var minY = shapeRad;
		var maxY = canvas.height - shapeRad;
		
		var bRect = canvas.getBoundingClientRect();
		mouseX = (event.clientX - bRect.left)*(canvas.width/bRect.width);
		mouseY = (event.clientY - bRect.top)*(canvas.height/bRect.height);
		
		posX = mouseX - dragX;
		posX = (posX < minX) ? minX : ((posX > maxX) ? maxX : posX);
		posY = mouseY - dragY;
		posY = (posY < minY) ? minY : ((posY > maxY) ? maxY : posY);
		
		circles[circleCount-1].x = posX;
		circles[circleCount-1].y = posY;
		
		drawCircles();
	}
	
//####################################################################################################################
//		To Move the Circles Randomly
//####################################################################################################################

function moveRandomly(){
	
	if(document.getElementById("btnMove").name=="Move Random")
		{		
			flagRandom=true;
			document.getElementById("btnMove").name="Stop Random";
			moveRandom();
		}
		
	else{
		
			flagRandom=false;
			document.getElementById("btnMove").name="Move Random";
			clearInterval();
		}		
}
	
function moveRandom(){
	if(flagRandom==true)
	{	
		for (i=0; i < circleCount; i++) {
			
			dx=Math.floor((Math.random()*50));
			dy=Math.floor((Math.random()*50));

			context.clearRect(0,0,canvas.width,canvas.height);
			context.beginPath();
			context.fillStyle=circles[i].color;

			context.arc(circles[i].x,circles[i].y,circles[i].rad,0,Math.PI*2,true);
			context.closePath();
			context.fill();

			if( circles[i].x<0 || circles[i].x>canvas.width)
				dx=-7*dx;
			if( circles[i].y<0 || circles[i].y>canvas.height)
				dy=-7*dy;
			circles[i].x+=dx;
			circles[i].y+=dy;
		}
	
		drawCircles();
	}
	
	else
	{
		clearInterval();
	}
}

setInterval(moveRandom,10); 
              </script>     
>>>>>>> a895c195198f7a871aeb87eb47fdbce65cb88b49
        <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
        
        <script type="text/javascript">
            var lastPeerId = null;
    var peer = null; // own peer object
    var conn = null;
            // Find the canvas element to capture
<<<<<<< HEAD
var canvasElt = document.getElementById('imageView');
=======
var canvasElt = document.getElementById('canvas');
>>>>>>> a895c195198f7a871aeb87eb47fdbce65cb88b49

// Get the stream
var stream = canvasElt.captureStream(25); // 25 FPS

// Do things to the stream
// E.g. Send it to another computer using an RTCPeerConnection
//      pc is an RTCPeerConnection created elsewhere
pc.addStream(stream);
        </script>
    </body>
</html>
